<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>æ ‘çš„ç›´å¾„-é¢˜è§£</title>
      <link href="/posts/1138517949/"/>
      <url>/posts/1138517949/</url>
      
        <content type="html"><![CDATA[<p>éƒ½æ˜¯æ°´é¢˜å•¦ï¼Œä½ ä»¬éƒ½èƒ½ä¸€çœ¼ç§’çš„</p><a id="more"></a><h2 id="BZOJ1999-Noip2007-Coreæ ‘ç½‘çš„æ ¸"><a href="#BZOJ1999-Noip2007-Coreæ ‘ç½‘çš„æ ¸" class="headerlink" title="BZOJ1999 [Noip2007] Coreæ ‘ç½‘çš„æ ¸"></a>BZOJ1999 [Noip2007] Coreæ ‘ç½‘çš„æ ¸</h2><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™å®šä¸€æ£µå¸¦è¾¹æƒæ— æ ¹æ ‘ï¼Œåœ¨å…¶ç›´å¾„ä¸Šæ±‚å‡ºä¸€æ®µé•¿åº¦ä¸è¶…è¿‡ $s$ çš„è·¯å¾„ $F$ ï¼Œä½¿å¾—ç¦»è·¯å¾„è·ç¦»æœ€è¿œçš„ç‚¹åˆ°è·¯å¾„çš„è·ç¦» $ECC$ æœ€çŸ­ã€‚</p><p>ç‚¹ $v$ åˆ°è·¯å¾„ $F$ è·ç¦» $D(v,ğ¹)$ $=$ $minâ¡$ { $d(v,u)$ } , $u$ ä¸ºè·¯å¾„ä¸Šçš„ç‚¹</p></blockquote><p>$$<br>n \leq 500000,s &lt; 2^{32} ï¼Œæ‰€æœ‰è¾¹æƒ&lt;500<br>$$</p><h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>å¯¹è·ç¦» $ECC$ äº§ç”Ÿè´¡çŒ®çš„ç‚¹æ¥è‡ªä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†</p><ul><li>ç›´å¾„çš„ç«¯ç‚¹</li><li>è·¯å¾„ä¸Šçš„ç‚¹åˆ°éç›´å¾„ä¸Šç‚¹çš„è·ç¦»</li></ul><p>å¯¹äº<strong>ç›´å¾„çš„ç«¯ç‚¹</strong>ï¼Œæˆ‘ä»¬æœ‰ä¸ªç»“è®ºï¼Œç¦»ä¸€ä¸ªç‚¹è·ç¦»æœ€è¿œçš„ç‚¹æ˜¯ç›´å¾„çš„ä¸€ä¸ªç«¯ç‚¹</p><p>å› è€Œæˆ‘ä»¬æ— éœ€è€ƒè™‘ç›´å¾„ä¸Šé™¤ç«¯ç‚¹å¤–çš„å…¶å®ƒç‚¹ï¼Œ</p><p>é‚£ä¹ˆè·¯å¾„ $F$ å°½å¯èƒ½å¤§ï¼Œæ‰èƒ½ä¿è¯è¿™éƒ¨åˆ†è´¡çŒ®å°½å¯èƒ½å°</p><p>ä½†è¿™åªæ˜¯ä¸€ä¸ªéƒ¨åˆ†ï¼Œæˆ‘ä»¬è¿˜è¦è€ƒè™‘<strong>è·¯å¾„ä¸Šçš„ç‚¹åˆ°éç›´å¾„ä¸Šç‚¹çš„è·ç¦»</strong>çš„è´¡çŒ®</p><p>è¿™éƒ¨åˆ†è´¡çŒ®å¯èƒ½ä¼šæ›´å¤§ï¼Œä½¿å®é™…ä¸Šçš„è·ç¦» $ECC$ æ¯”<strong>ç›´å¾„çš„ç«¯ç‚¹</strong>å½±å“é€ æˆçš„ $ECC$ å¤§ï¼Œ</p><p>ä»¥è‡³äºæ©ç›–ä½<strong>ç›´å¾„çš„ç«¯ç‚¹</strong>çš„è´¡çŒ®ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å– $max$ ä¿è¯ç¬¦åˆå®šä¹‰</p><p>æ±‚è¿™éƒ¨åˆ†è´¡çŒ®å¯ä»¥å¯¹è·¯å¾„ä¸Šæ¯ä¸ªç‚¹ $dfs$ è§£å†³</p><p>å› ä¸º<strong>åœ¨ç›´å¾„ä¸Šä¸”åœ¨è·¯å¾„å¤–çš„ç‚¹</strong>åˆ°<strong>éç›´å¾„ç‚¹çš„è·ç¦»</strong>ä¸€å®šå°äºç­‰äº<strong>ç›´å¾„çš„ç«¯ç‚¹</strong>çš„è´¡çŒ®</p><p>æ²¡æœ‰å½±å“ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯¹æ•´ä¸ªç›´å¾„ä¸Šçš„çš„ç‚¹ $dfs$ï¼Œ</p><h3 id="code"><a href="#code" class="headerlink" title="$code$"></a>$code$</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> min(a,b) ((a)&lt;(b))?(a):(b)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> max(a,b) ((a)&gt;(b))?(a):(b)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">(<span class="keyword">int</span> &amp;x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    x=<span class="number">0</span>;<span class="keyword">char</span> ch;<span class="keyword">int</span> f=<span class="number">1</span>;ch=getchar();</span><br><span class="line">    <span class="keyword">for</span>(;!<span class="built_in">isdigit</span>(ch);) &#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>) f=<span class="number">-1</span>;ch=getchar();&#125;</span><br><span class="line">    <span class="keyword">for</span>(;<span class="built_in">isdigit</span>(ch);) x=x*<span class="number">10</span>+(ch^<span class="number">48</span>),ch=getchar();</span><br><span class="line">    x*=f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">500005</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EDGEE</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> nxt,wei,to;</span><br><span class="line">&#125;edge[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="keyword">int</span> head[N],tot;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge[++tot].nxt=head[x];</span><br><span class="line">    edge[tot].to=y;</span><br><span class="line">    edge[tot].wei=v;</span><br><span class="line">    head[x]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n,s,maxn,maxp,ls;</span><br><span class="line"><span class="keyword">int</span> dep[N],is_d[N],pre[N];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    pre[x]=fa;</span><br><span class="line">    <span class="keyword">if</span>(dep[x]&gt;maxn)</span><br><span class="line">    &#123;</span><br><span class="line">        maxp=x;</span><br><span class="line">        maxn=dep[x];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=head[x];i;i=edge[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> tt=edge[i].to;</span><br><span class="line">        <span class="keyword">if</span>(tt==fa||is_d[tt]) <span class="keyword">continue</span>;</span><br><span class="line">        dep[tt]=dep[x]+edge[i].wei;</span><br><span class="line">        dfs(tt,x);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> x,y,w,ans=INF;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    read(n);read(s);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        read(x);read(y);read(w);</span><br><span class="line">        add(x,y,w);add(y,x,w);</span><br><span class="line">    &#125;</span><br><span class="line">    maxn=-INF;</span><br><span class="line">    dep[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">    dfs(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">    ls=maxp;</span><br><span class="line">    maxn=-INF;</span><br><span class="line">    dep[ls]=<span class="number">0</span>;</span><br><span class="line">    dfs(ls,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=maxp,j=maxp;i;i=pre[i])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span>(dep[j]-dep[i]&gt;s) j=pre[j];</span><br><span class="line">        ans=min(ans,max(dep[i],maxn-dep[j]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=maxp;i;i=pre[i])</span><br><span class="line">        is_d[i]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=maxp;i;i=pre[i])</span><br><span class="line">    &#123;</span><br><span class="line">        dep[i]=<span class="number">0</span>;</span><br><span class="line">        dfs(i,pre[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        ans=max(ans,dep[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>,ans);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="UVA11695-Flight-Planning"><a href="#UVA11695-Flight-Planning" class="headerlink" title="UVA11695  Flight  Planning"></a>UVA11695  Flight  Planning</h2><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>ç»™ä¸€ä¸ª $N$ ä¸ªèŠ‚ç‚¹è¾¹æƒä¸º 1 çš„æ— æ ¹æ ‘ï¼Œå»æ‰ä¸€æ¡è¾¹ï¼Œæ–°å¢ä¸€æ¡è¾¹ï¼Œæ±‚æ–°çš„æ ‘çš„æœ€é•¿é“¾ï¼Œé—®æ€ä¹ˆå»è¾¹å’ŒåŠ è¾¹ï¼Œä½¿å¾—æœ€é•¿é“¾çš„é•¿åº¦æœ€å°</p></blockquote><p>$$<br>1 \leq n \leq 2500<br>$$</p><h3 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>æˆ‘ä»¬å¯ä»¥æšä¸¾æ¯ä¸€æ¡è¦åˆ å»çš„è¾¹</p><p>å»æ‰è¿™æ¡è¾¹åï¼Œæœ€å°çš„æ ‘çš„ç›´å¾„ä¼šå‡ºç°åœ¨ä»¥ä¸‹å‡ ç§æƒ…å†µä¸­</p><ul><li>å­æ ‘ $A$ çš„ç›´å¾„</li><li>å­æ ‘ $B$ çš„ç›´å¾„</li><li>åŠ è¾¹åæ ‘çš„ç›´å¾„</li></ul><p>å­æ ‘ $A$ ï¼Œ$B$ çš„ç›´å¾„æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä¿è¯åŠ è¾¹åæ ‘çš„ç›´å¾„æœ€å°</p><p>æ‰€ä»¥è¦åœ¨å­æ ‘ä¸­æ‰¾åˆ°ä¸€ä¸ªç‚¹ä½¿å…¶åˆ°è¯¥å­æ ‘å…¶ä»–ç‚¹çš„æœ€å¤§è·ç¦»æœ€å°</p><p>å¾ˆæ˜¾ç„¶ï¼Œè¿™ä¸ªç‚¹ä¸€å®šæ˜¯ç›´å¾„çš„ä¸­ç‚¹ï¼Œ</p><p>å­æ ‘çš„è¿™ä¸¤ä¸ªç‚¹å°±æ˜¯è¦è¿è¾¹çš„èŠ‚ç‚¹</p><h3 id="code-1"><a href="#code-1" class="headerlink" title="$code$"></a>$code$</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">(<span class="keyword">int</span> &amp;x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    x=<span class="number">0</span>;<span class="keyword">char</span> ch;<span class="keyword">int</span> f=<span class="number">1</span>;ch=getchar();</span><br><span class="line">    <span class="keyword">for</span>(;!<span class="built_in">isdigit</span>(ch);) &#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>) f=<span class="number">-1</span>;ch=getchar();&#125;</span><br><span class="line">    <span class="keyword">for</span>(;<span class="built_in">isdigit</span>(ch);) x=x*<span class="number">10</span>+(ch^<span class="number">48</span>),ch=getchar();</span><br><span class="line">    x*=f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">5005</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EDGEE</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> nxt,from,to;</span><br><span class="line">&#125;edge[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="keyword">int</span> head[N],tot;</span><br><span class="line"><span class="keyword">int</span> T,n,x,y,addA,addB,p_addA,p_addB,lenA,lenB,delA,delB,ans=INF;</span><br><span class="line"><span class="keyword">int</span> dep[N],pre[N],maxp,maxn=-INF,minn=INF,rbq,ls;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge[++tot].nxt=head[x];</span><br><span class="line">    edge[tot].from=x;</span><br><span class="line">    edge[tot].to=y;</span><br><span class="line">    head[x]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> fa,<span class="keyword">const</span> <span class="keyword">int</span> &amp;del)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    pre[x]=fa;</span><br><span class="line">    <span class="keyword">if</span>(dep[x]&gt;maxn)</span><br><span class="line">    &#123;</span><br><span class="line">        maxp=x;</span><br><span class="line">        maxn=dep[x];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=head[x];i;i=edge[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(i==del||i==(del+<span class="number">1</span>)) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">int</span> tt=edge[i].to;</span><br><span class="line">        <span class="keyword">if</span>(tt==fa) <span class="keyword">continue</span>;</span><br><span class="line">        dep[tt]=dep[x]+<span class="number">1</span>;</span><br><span class="line">        dfs(tt,x,del);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> del)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//memset(pre,0,sizeof(pre));</span></span><br><span class="line">    maxp=edge[del].from;</span><br><span class="line">    maxn=-INF;</span><br><span class="line">    minn=INF;</span><br><span class="line">    dep[edge[del].from]=<span class="number">0</span>;</span><br><span class="line">    dfs(edge[del].from,<span class="number">0</span>,del);</span><br><span class="line"></span><br><span class="line"><span class="comment">//memset(pre,0,sizeof(pre));</span></span><br><span class="line">    ls=maxp;</span><br><span class="line">    maxn=-INF;</span><br><span class="line">    minn=INF;</span><br><span class="line">    dep[ls]=<span class="number">0</span>;</span><br><span class="line">    dfs(ls,<span class="number">0</span>,del);</span><br><span class="line"></span><br><span class="line">    lenA=maxn;</span><br><span class="line">    p_addA=maxp;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;lenA/<span class="number">2</span>;i++) p_addA=pre[p_addA];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//--------------------------------------------------</span></span><br><span class="line"><span class="comment">//memset(pre,0,sizeof(pre));</span></span><br><span class="line">    maxp=edge[del].to;</span><br><span class="line">    maxn=-INF;</span><br><span class="line">    minn=INF;</span><br><span class="line">    dep[edge[del].to]=<span class="number">0</span>;</span><br><span class="line">    dfs(edge[del].to,<span class="number">0</span>,del);</span><br><span class="line"></span><br><span class="line"><span class="comment">//memset(pre,0,sizeof(pre));</span></span><br><span class="line">    ls=maxp;</span><br><span class="line">    maxn=-INF;</span><br><span class="line">    minn=INF;</span><br><span class="line">    dep[ls]=<span class="number">0</span>;</span><br><span class="line">    dfs(ls,<span class="number">0</span>,del);</span><br><span class="line"></span><br><span class="line">    lenB=maxn;</span><br><span class="line">    p_addB=maxp;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;lenB/<span class="number">2</span>;i++) p_addB=pre[p_addB];</span><br><span class="line"></span><br><span class="line">    rbq=max(max(lenA,lenB),(lenA+<span class="number">1</span>)/<span class="number">2</span>+(lenB+<span class="number">1</span>)/<span class="number">2</span>+<span class="number">1</span>);</span><br><span class="line"><span class="comment">//    cout&lt;&lt;"$"&lt;&lt;lenA&lt;&lt;' '&lt;&lt;lenB&lt;&lt;"$"&lt;&lt;endl;</span></span><br><span class="line">    <span class="keyword">if</span>(ans&gt;rbq)</span><br><span class="line">    &#123;</span><br><span class="line">        ans=rbq;</span><br><span class="line">        delA=edge[del].from;</span><br><span class="line">        delB=edge[del].to;</span><br><span class="line">        addA=p_addA;</span><br><span class="line">        addB=p_addB;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    read(T);</span><br><span class="line">    <span class="keyword">for</span>(;T--;)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(head,<span class="number">0</span>,<span class="keyword">sizeof</span>(head));</span><br><span class="line">        <span class="built_in">memset</span>(edge,<span class="number">0</span>,<span class="keyword">sizeof</span>(edge));</span><br><span class="line">        tot=<span class="number">0</span>;ans=INF;</span><br><span class="line">        read(n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            read(x);read(y);</span><br><span class="line">            add(x,y);add(y,x);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=tot;i+=<span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            solve(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>,delA,delB);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>,addA,addB);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="BZOJ1912-APIO2010-patrol-å·¡é€»"><a href="#BZOJ1912-APIO2010-patrol-å·¡é€»" class="headerlink" title="BZOJ1912  [APIO2010] patrol å·¡é€»"></a>BZOJ1912  [APIO2010] patrol å·¡é€»</h2><h3 id="é¢˜ç›®æè¿°-2"><a href="#é¢˜ç›®æè¿°-2" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><p><a href="https://www.luogu.org/problemnew/show/P3629" target="_blank" rel="noopener">é“¾æ¥</a></p><h3 id="é¢˜è§£-2"><a href="#é¢˜è§£-2" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>å¾ˆæ˜¾ç„¶ï¼Œå½“ $k = 1$ æ—¶ï¼Œæ‰¾åˆ°ç›´å¾„ç„¶åè¿ç«¯ç‚¹å°±å¯ä»¥äº†</p><p>å½“ $k = 2$ æ—¶ï¼Œæˆ‘ä»¬è¦æ‰¾ç›´å¾„å’Œ<strong>è¾¹ä¸ç›¸äº¤</strong>çš„ç¬¬äºŒå¤§ç›´å¾„</p><p>å½“ä¸¤æ¡ç›´å¾„ç›¸äº¤çš„æ—¶å€™ï¼Œ</p><p>å› ä¸ºåŠ çš„è¾¹å¿…é¡»èµ°ï¼Œæ‰€ä»¥ç¬¬äºŒæ¡åŠ è¾¹å¹¶æ²¡æœ‰èµ·åˆ°ç¼©çŸ­è·¯ç¨‹çš„ä½œç”¨ï¼Œåè€Œå¤šèŠ±è´¹äº† $1$</p><p>åè€Œä¸å¦‚æŠŠè¾¹é€€åŒ–æˆç‚¹ï¼Œé•¿åº¦ä¸º $0$</p><p>æ‰¾æ¬¡å¤§ç›´å¾„å¯ä»¥æŠŠç›´å¾„ä¸Šçš„è¾¹æƒæ”¹æˆ $-1$ ï¼Œå†æ±‚ç›´å¾„</p><p>ç”±äºå‡ºç°äº†è´Ÿè¾¹æƒï¼Œç”¨ dfs/bfs ä¼šæŒ‚ ï¼ˆå¯èƒ½æ˜¯æˆ‘å¤ªèœäº†ï¼‰</p><p>æ‰€ä»¥ç”¨ $dp$ æ±‚è§£</p><h3 id="code-2"><a href="#code-2" class="headerlink" title="$code$"></a>$code$</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF 0x7fffffff</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">(<span class="keyword">int</span> &amp;x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    x=<span class="number">0</span>;<span class="keyword">char</span> ch;<span class="keyword">int</span> f=<span class="number">1</span>;ch=getchar();</span><br><span class="line">    <span class="keyword">for</span>(;!<span class="built_in">isdigit</span>(ch);) &#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>) f=<span class="number">-1</span>;ch=getchar();&#125;</span><br><span class="line">    <span class="keyword">for</span>(;<span class="built_in">isdigit</span>(ch);) x=x*<span class="number">10</span>+(ch^<span class="number">48</span>),ch=getchar();</span><br><span class="line">    x*=f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100005</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EDGEE</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> nxt,wei,to;</span><br><span class="line">&#125;edge[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="keyword">int</span> head[N],tot;</span><br><span class="line"><span class="keyword">int</span> n,k,maxn=-INF,maxp,ls,len1,len2; </span><br><span class="line"><span class="keyword">int</span> dep[N],pre[N],dis[N];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge[++tot].nxt=head[x];</span><br><span class="line">    edge[tot].to=y;</span><br><span class="line">    edge[tot].wei=<span class="number">1</span>;</span><br><span class="line">    head[x]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    pre[x]=fa;</span><br><span class="line">    <span class="keyword">if</span>(maxn&lt;dep[x])</span><br><span class="line">    &#123;</span><br><span class="line">        maxn=dep[x];</span><br><span class="line">        maxp=x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=head[x];i;i=edge[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> tt=edge[i].to;</span><br><span class="line">        <span class="keyword">if</span>(tt==fa) <span class="keyword">continue</span>;</span><br><span class="line"><span class="comment">//cout&lt;&lt;x&lt;&lt;' '&lt;&lt;tt&lt;&lt;endl;</span></span><br><span class="line">        dep[tt]=dep[x]+edge[i].wei;</span><br><span class="line">        dfs(tt,x);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">maxlen</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=head[x];i;i=edge[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> tt=edge[i].to;</span><br><span class="line">        <span class="keyword">if</span>(tt==fa) <span class="keyword">continue</span>;</span><br><span class="line">        maxlen(tt,x);</span><br><span class="line"><span class="comment">//cout&lt;&lt;x&lt;&lt;' '&lt;&lt;tt&lt;&lt;endl;</span></span><br><span class="line">        len2=max(len2,dis[x]+dis[tt]+edge[i].wei);</span><br><span class="line">        dis[x]=max(dis[x],dis[tt]+edge[i].wei);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=head[x];i;i=edge[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> tt=edge[i].to;</span><br><span class="line">        <span class="keyword">if</span>(tt==fa||tt!=pre[x]) <span class="keyword">continue</span>;</span><br><span class="line"><span class="comment">//cout&lt;&lt;x&lt;&lt;' '&lt;&lt;tt&lt;&lt;endl;</span></span><br><span class="line">        edge[i].wei=<span class="number">-1</span>;</span><br><span class="line">        edge[i&amp;<span class="number">1</span>?(i+<span class="number">1</span>):(i<span class="number">-1</span>)].wei=<span class="number">-1</span>;</span><br><span class="line">        work(tt,x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    read(n);read(k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        read(x);read(y);</span><br><span class="line">        add(x,y);add(y,x);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    maxn=-INF;</span><br><span class="line">    dep[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">    dfs(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">    ls=maxp;</span><br><span class="line">    maxn=-INF;</span><br><span class="line">    dep[ls]=<span class="number">0</span>;</span><br><span class="line">    dfs(ls,<span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    len1=maxn;</span><br><span class="line">    <span class="keyword">if</span>(k==<span class="number">1</span>) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d"</span>,<span class="number">2</span>*(n<span class="number">-1</span>)-len1+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    work(maxp,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    maxlen(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>,<span class="number">2</span>*(n<span class="number">-1</span>)-len1-len2+<span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> é¢˜è§£ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ ‘ä¸Šå·®åˆ†-é¢˜è§£</title>
      <link href="/posts/2952530072/"/>
      <url>/posts/2952530072/</url>
      
        <content type="html"><![CDATA[<p>éƒ½æ˜¯æ°´é¢˜å•¦ï¼Œä½ ä»¬éƒ½èƒ½ä¸€çœ¼ç§’çš„</p><a id="more"></a><h2 id="EOJ-Monthly-2018-8-D-Deliveryï¼ˆæ°´é¢˜ï¼‰"><a href="#EOJ-Monthly-2018-8-D-Deliveryï¼ˆæ°´é¢˜ï¼‰" class="headerlink" title="EOJ Monthly 2018.8 D.Deliveryï¼ˆæ°´é¢˜ï¼‰"></a>EOJ Monthly 2018.8 D.Deliveryï¼ˆæ°´é¢˜ï¼‰</h2><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>æœ‰ä¸€æ£µ $N$ ä¸ªèŠ‚ç‚¹çš„æ ‘ ï¼Œæ ‘çš„æ¯æ¡è¾¹éƒ½æœ‰å„è‡ªçš„æƒå€¼ $W_i$ ï¼Œåœ¨è¯¢é—®å¼€å§‹å‰ï¼Œå¯ä»¥äº¤æ¢ä»»ä¸€ä¸¤æ¡è¾¹çš„æƒå€¼ï¼Œæ¬¡æ•°ä¸é™ï¼Œæœ‰ $q$ ä¸ªè¯¢é—®ï¼Œæ¯ä¸ªè¯¢é—®åŒ…å«ä¸€ä¸ªèµ·ç‚¹ $S_i$ å’Œç»ˆç‚¹ $T_i$ ï¼Œä»èµ·ç‚¹åˆ°ç»ˆç‚¹ç»è¿‡çš„è¾¹çš„æƒå€¼å’Œå°±æ˜¯è¿™æ¬¡è¯¢é—®çš„èŠ±è´¹ï¼Œæ±‚æ‰€æœ‰è¯¢é—®çš„æœ€å°èŠ±è´¹å’Œ</p></blockquote><p>$$<br>1 \leq n \leq 2 \times 10^5,1 \leq q \leq 2 \times 10^5<br>$$<br>$$<br>1 \leq u_i,v_i \leq n,u_i \neq v_i<br>$$<br>$$<br>1 \leq w_i \leq 1000<br>$$<br>$$<br>1 \leq s_i,t_i \leq n,s_i \neq t_i<br>$$</p><h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>è¿™å°±æ˜¯æ±‚è¾¹è¦†ç›–æ¬¡æ•°çš„è£¸é¢˜å•Šï¼Œè¦†ç›–è¾¹æŒ‰è¦†ç›–æ¬¡æ•°ç»™äºˆä»å°åˆ°å¤§çš„æƒå€¼å°±ç»“æŸå•¦</p><p>å¤ªæ°´ä¸è´´ä»£ç </p><hr><h2 id="BZOJ4424-CF19E-Fairyï¼ˆå¤§æ°´é¢˜ï¼‰"><a href="#BZOJ4424-CF19E-Fairyï¼ˆå¤§æ°´é¢˜ï¼‰" class="headerlink" title="BZOJ4424/CF19E    Fairyï¼ˆå¤§æ°´é¢˜ï¼‰"></a>BZOJ4424/CF19E    Fairyï¼ˆå¤§æ°´é¢˜ï¼‰</h2><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>   ç»™å®š $N$ ä¸ªç‚¹ï¼Œ$M$ æ¡è¾¹çš„æ— å‘å›¾ï¼Œå¯ä»¥ä»å›¾ä¸­åˆ é™¤ä¸€æ¡è¾¹ï¼Œé—®åˆ é™¤å“ªäº›è¾¹å¯ä»¥ä½¿å›¾å˜æˆä¸€ä¸ªäºŒåˆ†å›¾ã€‚</p></blockquote><p>$$<br>1 \leq n,m \leq 1000000<br>$$</p><h3 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>é¦–å…ˆäºŒåˆ†å›¾æ˜¯æ²¡æœ‰å¥‡ç¯çš„ï¼Œæˆ‘ä»¬è¦åˆ è¾¹æ¥å»æ‰å¥‡ç¯</p><p>åªæœ‰ä¸€æ¡è¾¹è¢«æ‰€æœ‰çš„å¥‡ç¯è¦†ç›–æ—¶æ‰èƒ½å»åˆ å®ƒï¼Œè¿™æ ·æ‰èƒ½ä¿è¯æ²¡æœ‰å¥‡ç¯</p><p>å¦‚æœè¿™æ¡è¾¹è¢«å¶ç¯è¦†ç›–çš„è¯ï¼Œæ— è®ºæ€ä¹ˆåˆ éƒ½ä¼šå‡ºç°ä¸€ä¸ªæ–°å¥‡ç¯ï¼Œè¿™æ¡è¾¹æ˜¯ä¸èƒ½åˆ çš„</p><p>æˆ‘ä»¬å¯¹å›¾ $dfs$ éå†ï¼Œå¯¹è¾¹æ–°å»ºå‡ºä¸€æ£µæ ‘</p><p>ç„¶åè¿™ä¸ªè¾¹çš„è¦†ç›–é—®é¢˜å°±å¯ä»¥é€šè¿‡æ ‘ä¸Šå·®åˆ†è§£å†³</p><h3 id="code"><a href="#code" class="headerlink" title="$code$"></a>$code$</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">data</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> nxt,to,id;</span><br><span class="line">&#125;edge[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EDGEE</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> nxt,to;</span><br><span class="line">&#125;edge2[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> n,m,tot=<span class="number">0</span>,tot2=<span class="number">0</span>,top=<span class="number">0</span>,cnt=<span class="number">0</span>,cnt2=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> head[N],head2[N],sta[N&lt;&lt;<span class="number">1</span>],pos[N&lt;&lt;<span class="number">1</span>],vis[N&lt;&lt;<span class="number">1</span>],vis2[N&lt;&lt;<span class="number">1</span>],sum[N&lt;&lt;<span class="number">1</span>],fir[N&lt;&lt;<span class="number">1</span>],ans[N];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge[++tot].nxt=head[x];</span><br><span class="line">    edge[tot].to=y;</span><br><span class="line">    edge[tot].id=i;</span><br><span class="line">    head[x]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add2</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge2[++tot2].nxt=head2[x];</span><br><span class="line">    edge2[tot2].to=y;</span><br><span class="line">    head2[x]=tot2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> now,<span class="keyword">int</span> fa,<span class="keyword">int</span> pre_id)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    sta[++top]=now;pos[now]=top;vis[now]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=head[now];i;i=edge[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> tt=edge[i].to,nid=edge[i].id;</span><br><span class="line">        <span class="keyword">if</span>(nid==pre_id) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(!vis2[nid]) vis2[nid]=<span class="number">1</span>,add2(pre_id,nid),add2(nid,pre_id);</span><br><span class="line">        <span class="keyword">if</span>(!pos[tt]) fir[tt]=nid,dfs(tt,now,nid);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(vis[tt])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>((pos[now]-pos[tt]+<span class="number">1</span>)&amp;<span class="number">1</span>) sum[nid]++,sum[fir[tt]]--,cnt++;</span><br><span class="line">            <span class="keyword">else</span> sum[nid]--,sum[fir[tt]]++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    vis[now]=<span class="number">0</span>;top--;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> now,<span class="keyword">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=head2[now];i;i=edge2[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> tt=edge2[i].to;</span><br><span class="line">        <span class="keyword">if</span>(tt==fa) <span class="keyword">continue</span>;</span><br><span class="line">        dfs2(tt,now);</span><br><span class="line">        sum[now]+=sum[tt];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(sum[now]==cnt) ans[++cnt2]=now;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">ifdef</span> ROY1994</span></span><br><span class="line">        freopen(<span class="string">"testdata.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</span><br><span class="line">        freopen(<span class="string">"A.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    io&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        io&gt;&gt;x&gt;&gt;y;</span><br><span class="line">        add(x,y,i);</span><br><span class="line">        add(y,x,i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">if</span>(!pos[i]) dfs(i,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    dfs2(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(!cnt)</span><br><span class="line">    &#123;</span><br><span class="line">        io&lt;&lt;m&lt;&lt;<span class="string">'\n'</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">            io&lt;&lt;i&lt;&lt;<span class="string">' '</span>;</span><br><span class="line">        io&lt;&lt;<span class="string">'\n'</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(ans+<span class="number">1</span>,ans+cnt2+<span class="number">1</span>);</span><br><span class="line">    io&lt;&lt;cnt2&lt;&lt;<span class="string">'\n'</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt2;i++)</span><br><span class="line">        io&lt;&lt;ans[i]&lt;&lt;<span class="string">' '</span>;</span><br><span class="line">    io&lt;&lt;<span class="string">'\n'</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2017-SEERC-L-Divide-and-Conquerï¼ˆå·¨æ°´é¢˜ï¼‰"><a href="#2017-SEERC-L-Divide-and-Conquerï¼ˆå·¨æ°´é¢˜ï¼‰" class="headerlink" title="2017 SEERC  L.  Divide and Conquerï¼ˆå·¨æ°´é¢˜ï¼‰"></a>2017 SEERC  L.  Divide and Conquerï¼ˆå·¨æ°´é¢˜ï¼‰</h2><h3 id="é¢˜ç›®æè¿°-2"><a href="#é¢˜ç›®æè¿°-2" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><blockquote><p>æœ‰ä¸€ä¸ªæœ‰ $N$ ä¸ªç‚¹çš„ç”±ä¸¤æ£µä¸åŒçš„æ ‘æ„æˆçš„å¤åˆå›¾(æ— é‡è¾¹)ã€‚</p><p>é—®æœ€å°‘åˆ‡æ–­å‡ æ¡è¾¹ï¼Œå¯ä»¥ä½¿åŸå›¾ä¸è”é€šã€‚å¹¶è¾“å‡ºæ–¹æ¡ˆæ•°</p></blockquote><p>$$<br>1 \leq n \leq 1000000<br>$$</p><h3 id="é¢˜è§£-2"><a href="#é¢˜è§£-2" class="headerlink" title="é¢˜è§£"></a>é¢˜è§£</h3><p>é¦–å…ˆåˆ‡æ–­çš„è¾¹æ•°è‚¯å®šæ˜¯ 2 ~ 3 </p><p>è¿™æ˜¯ä¸¤æ£µæ ‘ç»„æˆçš„å›¾ï¼Œæ‰€ä»¥åªæœ‰ $2N-2$ æ¡è¾¹ï¼Œ</p><p>å‡è®¾åˆ‡æ–­ 4 æ¡è¾¹æ‰èƒ½ä¿è¯ä¸è”é€šï¼Œé‚£ä¹ˆè‡³å°‘è¦æœ‰ $2N$ æ¡è¾¹ï¼Œå¾ˆæ˜¾ç„¶çŸ›ç›¾</p><p>æ‰€ä»¥è‚¯å®šåˆ‡æ–­ 2 ~ 3 æ¡è¾¹</p><p>é‚£ä¹ˆå¿…ç„¶æ˜¯ä¸€é¢—æ ‘ä¸Šåˆ‡æ–­ 1 æ¡è¾¹ï¼Œå¦ä¸€é¢—æ ‘ä¸Šåˆ‡æ–­ 1 ~ 2 æ¡è¾¹</p><p>æˆ‘ä»¬å…ˆä»¥ $A$ æ ‘ä¸ºä¸»ï¼ŒæŠŠ $B$ æ ‘çš„è¾¹ä½œä¸ºè¿”ç¥–è¾¹/æ¨ªæ’è¾¹</p><p>é‚£ä¹ˆå°±ç›¸å½“äºæ±‚æ¨ªè·¨ $A$ æ ‘çš„å±äº $B$ æ ‘çš„è¾¹æ•°ï¼Œ</p><p>è¿™ä¸ªå¯ä»¥é€šè¿‡æ ‘ä¸Šå·®åˆ†è§£å†³</p><p>æ¯ä¸ªèŠ‚ç‚¹çš„ $sum$ å°±æ˜¯æ¨ªè·¨å…¶çš„ $B$ æ ‘è¾¹æ•°</p><p>æˆ‘ä»¬å¯¹ $sum+1$ å–æœ€å°å€¼ $minn$ å¹¶è®°å½•æ–¹æ¡ˆæ•°</p><p>å¦‚æœ $minn=2$ ç›´æ¥è¾“å‡º</p><p>å¦‚æœ $minn=3$ å› ä¸ºå¯ä»¥ $A$ æ ‘æ–­ 2 æ¡ï¼Œ $B$ æ ‘æ–­ 1 æ¡</p><p>æˆ‘ä»¬äº¤æ¢å†ç»Ÿè®¡ä¸€æ¬¡æ–¹æ¡ˆåŠ ä¸Šä¹‹å‰çš„å°±æ˜¯æ–¹æ¡ˆæ•°</p><h3 id="code-1"><a href="#code-1" class="headerlink" title="$code$"></a>$code$</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">int</span> s=<span class="number">0</span>,w=<span class="number">1</span>;</span><br><span class="line">   <span class="keyword">char</span> ch=getchar();</span><br><span class="line">   <span class="keyword">while</span>(ch&lt;<span class="string">'0'</span>||ch&gt;<span class="string">'9'</span>)&#123;<span class="keyword">if</span>(ch==<span class="string">'-'</span>)w=<span class="number">-1</span>;ch=getchar();&#125;</span><br><span class="line">   <span class="keyword">while</span>(ch&gt;=<span class="string">'0'</span>&amp;&amp;ch&lt;=<span class="string">'9'</span>) s=s*<span class="number">10</span>+ch-<span class="string">'0'</span>,ch=getchar();</span><br><span class="line">   <span class="keyword">return</span> s*w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">100005</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">data</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> from,to;</span><br><span class="line">&#125;A[N&lt;&lt;<span class="number">1</span>],B[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EDGEE</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> nxt,to;</span><br><span class="line">&#125;edge[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="keyword">int</span> tot=<span class="number">0</span>,head[N];</span><br><span class="line"><span class="keyword">int</span> f[N][<span class="number">30</span>],dep[N],sum[N],q[N&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> n,stp,ans,minn=<span class="number">0x7fffffff</span>;</span><br><span class="line"><span class="keyword">int</span> m1,m2;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge[++tot].nxt=head[x];</span><br><span class="line">    edge[tot].to=y;</span><br><span class="line">    head[x]=tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> Head=<span class="number">1</span>,tail=<span class="number">0</span>;</span><br><span class="line">    dep[<span class="number">1</span>]=<span class="number">1</span>;f[<span class="number">1</span>][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    q[++tail]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(Head&lt;=tail)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> now=q[Head++];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=head[now];i;i=edge[i].nxt)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> tt=edge[i].to;</span><br><span class="line">            <span class="keyword">if</span>(dep[tt]) <span class="keyword">continue</span> ;</span><br><span class="line">            dep[tt]=dep[now]+<span class="number">1</span>;</span><br><span class="line">            f[tt][<span class="number">0</span>]=now;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=stp;j++)</span><br><span class="line">                f[tt][j]=f[f[tt][j<span class="number">-1</span>]][j<span class="number">-1</span>];</span><br><span class="line">            q[++tail]=tt;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(dep[x]&lt;dep[y]) swap(x,y);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=stp;i&gt;=<span class="number">0</span>;i--) </span><br><span class="line">        <span class="keyword">if</span>(dep[f[x][i]]&gt;=dep[y]) x=f[x][i];</span><br><span class="line">    <span class="keyword">if</span>(x==y) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=stp;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="keyword">if</span>(f[x][i]!=f[y][i]) x=f[x][i],y=f[y][i];</span><br><span class="line">    <span class="keyword">return</span> f[x][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=head[x];i;i=edge[i].nxt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> tt=edge[i].to;</span><br><span class="line">        <span class="keyword">if</span>(tt==f[x][<span class="number">0</span>]) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(tt);</span><br><span class="line">        sum[x]+=sum[tt];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(x==<span class="number">1</span>) <span class="keyword">return</span> ;</span><br><span class="line">    <span class="keyword">if</span>(sum[x]+<span class="number">1</span>&lt;minn) minn=sum[x]+<span class="number">1</span>,ans=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(sum[x]+<span class="number">1</span>==minn) ans++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">ADD</span><span class="params">(<span class="keyword">int</span> ff)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(ff==<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">            add(A[i].from,A[i].to),add(A[i].to,A[i].from);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">            add(B[i].from,B[i].to),add(B[i].to,B[i].from);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">ClearE</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(edge,<span class="number">0</span>,<span class="keyword">sizeof</span>(edge));</span><br><span class="line">    <span class="built_in">memset</span>(head,<span class="number">0</span>,<span class="keyword">sizeof</span>(head));</span><br><span class="line">    <span class="built_in">memset</span>(sum,<span class="number">0</span>,<span class="keyword">sizeof</span>(sum));</span><br><span class="line">    <span class="built_in">memset</span>(dep,<span class="number">0</span>,<span class="keyword">sizeof</span>(dep));</span><br><span class="line">    <span class="built_in">memset</span>(f,<span class="number">0</span>,<span class="keyword">sizeof</span>(f));</span><br><span class="line">    tot=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//freopen("ME.in","r",stdin);</span></span><br><span class="line"><span class="comment">//freopen("ME.out","w",stdout);</span></span><br><span class="line">    n=read();</span><br><span class="line">    stp=(<span class="keyword">int</span>)log2(n)+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        x=read();y=read();</span><br><span class="line">        A[i].from=x,A[i].to=y;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        x=read();y=read();</span><br><span class="line">        B[i].from=x,B[i].to=y;</span><br><span class="line">    &#125;</span><br><span class="line">    ADD(<span class="number">1</span>);</span><br><span class="line">    bfs();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        sum[B[i].from]++;</span><br><span class="line">        sum[B[i].to]++;</span><br><span class="line">        sum[lca(B[i].from,B[i].to)]-=<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(minn==<span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>,minn,ans);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ClearE();</span><br><span class="line">    ADD(<span class="number">2</span>);</span><br><span class="line">    bfs();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        sum[A[i].from]++;</span><br><span class="line">        sum[A[i].to]++;</span><br><span class="line">        sum[lca(A[i].from,A[i].to)]-=<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>,minn,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> é¢˜è§£ </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
